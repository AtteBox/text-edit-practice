import { test, expect } from "@playwright/test";

const isMac = process.platform === "darwin";

test("when page is loaded, initially show start view", async ({ page }) => {
  await page.goto("/");
  await expect(page.getByText("Welcome to Typo Terminator!")).toBeVisible();
  await expect(page.getByText("Start Game")).toBeVisible();
});

test("when played through first level, show results", async ({ page }) => {
  await page.goto("/");
  await expect(page.getByText("Welcome to Typo Terminator!")).toBeVisible();
  await page.click("text=Start Game");
  await expect(page.getByText("Level 1")).toBeVisible();
  const textarea = await page.$("textarea");
  for (const key of keysByLevel["1"]) {
    page.waitForTimeout(10);
    await textarea!.press(isMac ? key.replace("Control", "Alt"): key);
  }
  await expect(page.getByText("Level 1 Completed")).toBeVisible();
  for(const text of ["Germs: 0/69", "Animals: 44/44", "Difficulty: 100"]) {
    await expect(page.getByText(text, {exact: true})).toBeVisible();
  }
});

const keysByLevel = {
  "1": [
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowRight",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
  ],
  "2": [
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Backspace",
    "Control+ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Backspace",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Control+ArrowLeft",
    "Control+ArrowRight",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "Backspace",
    "Control+ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
  ],
  "3": [
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
  ],
  "4": [
    "Control+Delete",
    "Control+ArrowRight",
    "ArrowLeft",
    "ArrowLeft",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowLeft",
    "Delete",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "Delete",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "ArrowLeft",
    "ArrowLeft",
    "Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "Delete",
    "Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Delete",
    "Control+ArrowRight",
    "ArrowLeft",
    "ArrowLeft",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+ArrowRight",
    "ArrowLeft",
    "ArrowLeft",
    "Delete",
    "ArrowRight",
    "Control+Delete",
  ],
  "5": [
    "Delete",
    "Delete",
    "Control+Backspace",
    "Control+Backspace",
    "Control+Delete",
    "Control+ArrowLeft",
    "Backspace",
    "Backspace",
    "ArrowLeft",
    "Control+Backspace",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "Control+Backspace",
    "Control+Backspace",
    "Control+Backspace",
    "ArrowLeft",
    "Delete",
    "Delete",
    "Backspace",
    "ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "Control+Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowRight",
    "Backspace",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Backspace",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowRight",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "ArrowRight",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowLeft",
    "Control+Backspace",
    "Control+Backspace",
    "ArrowLeft",
    "ArrowLeft",
    "Backspace",
    "ArrowLeft",
    "Backspace",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+Backspace",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "ArrowRight",
    "ArrowRight",
    "ArrowLeft",
    "Delete",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+Delete",
    "Control+Delete",
    "ArrowRight",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "Control+Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "Delete",
    "Control+ArrowRight",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "ArrowRight",
    "Control+Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "ArrowLeft",
    "Delete",
    "Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "ArrowRight",
    "Control+Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "ArrowLeft",
    "ArrowRight",
    "Delete",
    "Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Control+Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowLeft",
    "Control+Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "Control+Delete",
    "Control+Delete",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowLeft",
    "Control+Delete",
    "Control+Delete",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "Control+ArrowRight",
    "Control+ArrowRight",
    "Control+ArrowLeft",
    "Delete",
    "Delete",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "Delete",
    "ArrowRight",
    "ArrowRight",
    "ArrowLeft",
    "Delete",
    "ArrowRight",
    "Delete",
    "Delete",
    "Delete",
  ],
};
